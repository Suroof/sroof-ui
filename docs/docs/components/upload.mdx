---
sidebar_position: 10
---

# Upload ä¸Šä¼ 

æ–‡ä»¶é€‰æ‹©ä¸Šä¼ å’Œæ‹–æ‹½ä¸Šä¼ æ§ä»¶ã€‚

## åŸºæœ¬ç”¨æ³•

```jsx live
function UploadExample() {
  const handleChange = (info) => {
    console.log('æ–‡ä»¶ä¿¡æ¯:', info);
  };
  
  return (
    <Upload onChange={handleChange}>
      <Button>ç‚¹å‡»ä¸Šä¼ </Button>
    </Upload>
  );
}
```

## æ‹–æ‹½ä¸Šä¼ 

```jsx live
function UploadDragExample() {
  const handleChange = (info) => {
    console.log('æ‹–æ‹½ä¸Šä¼ :', info);
  };
  
  return (
    <Upload.Dragger 
      onChange={handleChange}
      style={{ padding: '20px' }}
    >
      <div style={{ textAlign: 'center' }}>
        <p style={{ fontSize: '48px', margin: '0' }}>ğŸ“</p>
        <p>ç‚¹å‡»æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤åŒºåŸŸä¸Šä¼ </p>
        <p style={{ color: '#999' }}>æ”¯æŒå•ä¸ªæˆ–æ‰¹é‡ä¸Šä¼ </p>
      </div>
    </Upload.Dragger>
  );
}
```

## æ–‡ä»¶åˆ—è¡¨

```jsx live
function UploadListExample() {
  const [fileList, setFileList] = React.useState([
    {
      uid: '-1',
      name: 'image.png',
      status: 'done',
      url: 'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPiUjhimbqI.gif',
    },
    {
      uid: '-2',
      name: 'image.png',
      status: 'done',
      url: 'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPiUjhimbqI.gif',
    }
  ]);
  
  const handleChange = ({ fileList: newFileList }) => {
    setFileList(newFileList);
  };
  
  return (
    <Upload
      fileList={fileList}
      onChange={handleChange}
      listType="picture"
    >
      <Button>ä¸Šä¼ æ–‡ä»¶</Button>
    </Upload>
  );
}
```

## ç…§ç‰‡å¢™

```jsx live
function UploadPictureCardExample() {
  const [fileList, setFileList] = React.useState([
    {
      uid: '-1',
      name: 'image.png',
      status: 'done',
      url: 'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPiUjhimbqI.gif',
    }
  ]);
  
  const handleChange = ({ fileList: newFileList }) => {
    setFileList(newFileList);
  };
  
  const uploadButton = (
    <div>
      <div style={{ fontSize: '16px' }}>+</div>
      <div style={{ marginTop: 8 }}>ä¸Šä¼ </div>
    </div>
  );
  
  return (
    <Upload
      fileList={fileList}
      onChange={handleChange}
      listType="picture-card"
    >
      {fileList.length >= 8 ? null : uploadButton}
    </Upload>
  );
}
```

## æ‰‹åŠ¨ä¸Šä¼ 

```jsx live
function UploadManualExample() {
  const [fileList, setFileList] = React.useState([]);
  const [uploading, setUploading] = React.useState(false);
  
  const handleUpload = () => {
    setUploading(true);
    
    // æ¨¡æ‹Ÿä¸Šä¼ è¿‡ç¨‹
    setTimeout(() => {
      setUploading(false);
      setFileList([]);
      alert('ä¸Šä¼ æˆåŠŸï¼');
    }, 2000);
  };
  
  const props = {
    onRemove: (file) => {
      const index = fileList.indexOf(file);
      const newFileList = fileList.slice();
      newFileList.splice(index, 1);
      setFileList(newFileList);
    },
    beforeUpload: (file) => {
      setFileList([...fileList, file]);
      return false;
    },
    fileList,
  };
  
  return (
    <div>
      <Upload {...props}>
        <Button>é€‰æ‹©æ–‡ä»¶</Button>
      </Upload>
      <Button
        type="primary"
        onClick={handleUpload}
        disabled={fileList.length === 0}
        loading={uploading}
        style={{ marginTop: 16 }}
      >
        {uploading ? 'ä¸Šä¼ ä¸­' : 'å¼€å§‹ä¸Šä¼ '}
      </Button>
    </div>
  );
}
```

## é™åˆ¶æ–‡ä»¶ç±»å‹å’Œå¤§å°

```jsx live
function UploadRestrictExample() {
  const beforeUpload = (file) => {
    const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png';
    if (!isJpgOrPng) {
      alert('åªèƒ½ä¸Šä¼  JPG/PNG æ–‡ä»¶!');
      return false;
    }
    const isLt2M = file.size / 1024 / 1024 < 2;
    if (!isLt2M) {
      alert('å›¾ç‰‡å¿…é¡»å°äº 2MB!');
      return false;
    }
    return true;
  };
  
  return (
    <Upload
      beforeUpload={beforeUpload}
      accept=".jpg,.jpeg,.png"
    >
      <Button>ä¸Šä¼ å›¾ç‰‡ (JPG/PNG, < 2MB)</Button>
    </Upload>
  );
}
```

## è‡ªå®šä¹‰ä¸Šä¼ åˆ—è¡¨

```jsx live
function UploadCustomListExample() {
  const [fileList, setFileList] = React.useState([]);
  
  const handleChange = ({ fileList: newFileList }) => {
    setFileList(newFileList);
  };
  
  const itemRender = (originNode, file, currFileList) => {
    return (
      <div style={{ 
        display: 'flex', 
        alignItems: 'center', 
        padding: '8px', 
        border: '1px solid #d9d9d9', 
        borderRadius: '4px',
        marginBottom: '8px'
      }}>
        <span style={{ marginRight: '8px' }}>ğŸ“„</span>
        <span style={{ flex: 1 }}>{file.name}</span>
        <span style={{ color: '#999', fontSize: '12px' }}>
          {file.status === 'uploading' && 'ä¸Šä¼ ä¸­...'}
          {file.status === 'done' && 'âœ…'}
          {file.status === 'error' && 'âŒ'}
        </span>
      </div>
    );
  };
  
  return (
    <Upload
      fileList={fileList}
      onChange={handleChange}
      itemRender={itemRender}
    >
      <Button>ä¸Šä¼ æ–‡ä»¶</Button>
    </Upload>
  );
}
```

## API

### Upload Props

| å±æ€§ | è¯´æ˜ | ç±»å‹ | é»˜è®¤å€¼ |
| --- | --- | --- | --- |
| accept | æ¥å—ä¸Šä¼ çš„æ–‡ä»¶ç±»å‹ | `string` | - |
| action | ä¸Šä¼ çš„åœ°å€ | `string \| (file) => string \| Promise<string>` | - |
| beforeUpload | ä¸Šä¼ æ–‡ä»¶ä¹‹å‰çš„é’©å­ | `(file, fileList) => boolean \| Promise<File>` | - |
| className | è‡ªå®šä¹‰ç±»å | `string` | - |
| customRequest | é€šè¿‡è¦†ç›–é»˜è®¤çš„ä¸Šä¼ è¡Œä¸ºï¼Œå¯ä»¥è‡ªå®šä¹‰è‡ªå·±çš„ä¸Šä¼ å®ç° | `(options) => void` | - |
| data | ä¸Šä¼ æ‰€éœ€é¢å¤–å‚æ•°æˆ–è¿”å›ä¸Šä¼ é¢å¤–å‚æ•°çš„æ–¹æ³• | `object \| (file) => object \| Promise<object>` | - |
| defaultFileList | é»˜è®¤å·²ç»ä¸Šä¼ çš„æ–‡ä»¶åˆ—è¡¨ | `UploadFile[]` | - |
| directory | æ”¯æŒä¸Šä¼ æ–‡ä»¶å¤¹ | `boolean` | `false` |
| disabled | æ˜¯å¦ç¦ç”¨ | `boolean` | `false` |
| fileList | å·²ç»ä¸Šä¼ çš„æ–‡ä»¶åˆ—è¡¨ï¼ˆå—æ§ï¼‰ | `UploadFile[]` | - |
| headers | è®¾ç½®ä¸Šä¼ çš„è¯·æ±‚å¤´éƒ¨ | `object` | - |
| itemRender | è‡ªå®šä¹‰ä¸Šä¼ åˆ—è¡¨é¡¹ | `(originNode, file, fileList, actions) => React.ReactNode` | - |
| listType | ä¸Šä¼ åˆ—è¡¨çš„å†…å»ºæ ·å¼ | `'text' \| 'picture' \| 'picture-card'` | `'text'` |
| maxCount | é™åˆ¶ä¸Šä¼ æ•°é‡ | `number` | - |
| method | ä¸Šä¼ è¯·æ±‚çš„ http method | `string` | `'post'` |
| multiple | æ˜¯å¦æ”¯æŒå¤šé€‰æ–‡ä»¶ | `boolean` | `false` |
| name | å‘åˆ°åå°çš„æ–‡ä»¶å‚æ•°å | `string` | `'file'` |
| openFileDialogOnClick | ç‚¹å‡»æ‰“å¼€æ–‡ä»¶å¯¹è¯æ¡† | `boolean` | `true` |
| previewFile | è‡ªå®šä¹‰æ–‡ä»¶é¢„è§ˆé€»è¾‘ | `(file: File \| Blob) => Promise<dataURL: string>` | - |
| progress | è‡ªå®šä¹‰è¿›åº¦æ¡æ ·å¼ | `ProgressProps` | - |
| showUploadList | æ˜¯å¦å±•ç¤ºæ–‡ä»¶åˆ—è¡¨ | `boolean \| ShowUploadListInterface` | `true` |
| style | è‡ªå®šä¹‰æ ·å¼ | `React.CSSProperties` | - |
| withCredentials | ä¸Šä¼ è¯·æ±‚æ—¶æ˜¯å¦æºå¸¦ cookie | `boolean` | `false` |
| onChange | ä¸Šä¼ æ–‡ä»¶æ”¹å˜æ—¶çš„å›è°ƒ | `(info: UploadChangeParam) => void` | - |
| onDrop | å½“æ–‡ä»¶è¢«æ‹–å…¥ä¸Šä¼ åŒºåŸŸæ—¶æ‰§è¡Œçš„å›è°ƒåŠŸèƒ½ | `(event: React.DragEvent) => void` | - |
| onDownload | ç‚¹å‡»ä¸‹è½½æ–‡ä»¶æ—¶çš„å›è°ƒ | `(file: UploadFile) => void` | - |
| onPreview | ç‚¹å‡»æ–‡ä»¶é“¾æ¥æˆ–é¢„è§ˆå›¾æ ‡æ—¶çš„å›è°ƒ | `(file: UploadFile) => void` | - |
| onRemove | ç‚¹å‡»ç§»é™¤æ–‡ä»¶æ—¶çš„å›è°ƒ | `(file: UploadFile) => boolean \| Promise<boolean>` | - |

### Upload.Dragger Props

ç»§æ‰¿ Upload çš„æ‰€æœ‰å±æ€§ã€‚

### UploadFile

| å±æ€§ | è¯´æ˜ | ç±»å‹ |
| --- | --- | --- |
| uid | æ–‡ä»¶å”¯ä¸€æ ‡è¯†ç¬¦ | `string` |
| name | æ–‡ä»¶å | `string` |
| status | ä¸Šä¼ çŠ¶æ€ | `'uploading' \| 'done' \| 'error' \| 'removed'` |
| response | æœåŠ¡ç«¯å“åº”å†…å®¹ | `any` |
| linkProps | ä¸‹è½½é“¾æ¥é¢å¤–çš„ HTML å±æ€§ | `any` |
| type | æ–‡ä»¶ç±»å‹ | `string` |
| size | æ–‡ä»¶å¤§å° | `number` |
| percent | ä¸Šä¼ è¿›åº¦ | `number` |
| thumbUrl | ç¼©ç•¥å›¾åœ°å€ | `string` |
| url | æ–‡ä»¶åœ°å€ | `string` |
| preview | é¢„è§ˆåœ°å€ | `string` |
| originFileObj | åŸå§‹æ–‡ä»¶å¯¹è±¡ | `File` |