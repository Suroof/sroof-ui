---
sidebar_position: 6
---

# LanguageSwitcher 语言切换器

语言切换组件，支持下拉选择和按钮组两种样式，与国际化系统无缝集成。

## 基本用法

```jsx live
function LanguageSwitcherExample() {
  return (
    <div style={{ display: 'flex', flexDirection: 'column', gap: '20px' }}>
      <div>
        <h4>下拉选择器样式</h4>
        <LanguageSwitcher variant="dropdown" />
      </div>
      <div>
        <h4>按钮组样式</h4>
        <LanguageSwitcher variant="buttons" />
      </div>
    </div>
  );
}
```

```jsx
import { LanguageSwitcher } from 'sroof-ui';

function Example() {
  return (
    <div>
      <LanguageSwitcher variant="dropdown" />
      <LanguageSwitcher variant="buttons" />
    </div>
  );
}
```

## 下拉选择器样式

```jsx live
function DropdownExample() {
  return (
    <div style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>
      <div>
        <label style={{ display: 'block', marginBottom: '8px', fontWeight: 'bold' }}>
          默认下拉选择器:
        </label>
        <LanguageSwitcher variant="dropdown" />
      </div>
      <div>
        <label style={{ display: 'block', marginBottom: '8px', fontWeight: 'bold' }}>
          自定义样式:
        </label>
        <LanguageSwitcher 
          variant="dropdown" 
          className="custom-dropdown"
        />
      </div>
    </div>
  );
}
```

```jsx
<LanguageSwitcher variant="dropdown" />
<LanguageSwitcher variant="dropdown" className="custom-style" />
```

## 按钮组样式

```jsx live
function ButtonsExample() {
  return (
    <div style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>
      <div>
        <label style={{ display: 'block', marginBottom: '8px', fontWeight: 'bold' }}>
          默认按钮组:
        </label>
        <LanguageSwitcher variant="buttons" />
      </div>
      <div>
        <label style={{ display: 'block', marginBottom: '8px', fontWeight: 'bold' }}>
          自定义样式:
        </label>
        <LanguageSwitcher 
          variant="buttons" 
          className="custom-buttons"
        />
      </div>
    </div>
  );
}
```

```jsx
<LanguageSwitcher variant="buttons" />
<LanguageSwitcher variant="buttons" className="custom-style" />
```

## 与国际化内容结合

```jsx live
function I18nIntegrationExample() {
  const { t } = useTranslation();
  
  return (
    <div style={{ padding: '20px', border: '1px solid #e5e7eb', borderRadius: '8px' }}>
      <div style={{ marginBottom: '16px' }}>
        <LanguageSwitcher variant="buttons" />
      </div>
      
      <div style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>
        <h3>{t('common.welcome')}</h3>
        <p>{t('common.loading')}</p>
        <div style={{ display: 'flex', gap: '8px' }}>
          <button style={{ 
            padding: '8px 16px', 
            border: 'none', 
            borderRadius: '4px', 
            background: '#3b82f6', 
            color: 'white',
            cursor: 'pointer'
          }}>
            {t('button.primary')}
          </button>
          <button style={{ 
            padding: '8px 16px', 
            border: '1px solid #d1d5db', 
            borderRadius: '4px', 
            background: 'white',
            cursor: 'pointer'
          }}>
            {t('button.secondary')}
          </button>
        </div>
      </div>
    </div>
  );
}
```

```jsx
import { LanguageSwitcher } from 'sroof-ui';
import { useTranslation } from '../i18n/hooks/useTranslation';

function I18nExample() {
  const { t } = useTranslation();
  
  return (
    <div>
      <LanguageSwitcher variant="buttons" />
      <h1>{t('common.welcome')}</h1>
      <p>{t('common.description')}</p>
    </div>
  );
}
```

## 导航栏中使用

```jsx live
function NavigationExample() {
  return (
    <nav style={{ 
      display: 'flex', 
      justifyContent: 'space-between', 
      alignItems: 'center',
      padding: '12px 24px',
      background: '#f8fafc',
      borderBottom: '1px solid #e5e7eb'
    }}>
      <div style={{ display: 'flex', alignItems: 'center', gap: '24px' }}>
        <h2 style={{ margin: 0, fontSize: '18px', fontWeight: 'bold' }}>
          My App
        </h2>
        <div style={{ display: 'flex', gap: '16px' }}>
          <a href="#" style={{ textDecoration: 'none', color: '#374151' }}>首页</a>
          <a href="#" style={{ textDecoration: 'none', color: '#374151' }}>产品</a>
          <a href="#" style={{ textDecoration: 'none', color: '#374151' }}>关于</a>
        </div>
      </div>
      
      <LanguageSwitcher variant="dropdown" />
    </nav>
  );
}
```

```jsx
function Navigation() {
  return (
    <nav className="navbar">
      <div className="nav-brand">My App</div>
      <div className="nav-links">
        <a href="/">首页</a>
        <a href="/products">产品</a>
        <a href="/about">关于</a>
      </div>
      <LanguageSwitcher variant="dropdown" />
    </nav>
  );
}
```

## 手动语言切换

```jsx live
function ManualSwitchExample() {
  const { switchLanguage, currentLanguage } = useLanguageSwitch();
  
  const handleToggle = () => {
    const newLang = currentLanguage === 'en' ? 'zh' : 'en';
    switchLanguage(newLang);
  };
  
  return (
    <div style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>
      <div>
        <p>当前语言: <strong>{currentLanguage === 'en' ? 'English' : '中文'}</strong></p>
        <button 
          onClick={handleToggle}
          style={{ 
            padding: '8px 16px', 
            border: '1px solid #3b82f6', 
            borderRadius: '4px', 
            background: 'white',
            color: '#3b82f6',
            cursor: 'pointer'
          }}
        >
          切换到 {currentLanguage === 'en' ? '中文' : 'English'}
        </button>
      </div>
      
      <div style={{ marginTop: '16px' }}>
        <h4>或使用组件:</h4>
        <LanguageSwitcher variant="buttons" />
      </div>
    </div>
  );
}
```

```jsx
import { useLanguageSwitch } from '../i18n/hooks/useTranslation';

function CustomLanguageToggle() {
  const { switchLanguage, currentLanguage } = useLanguageSwitch();
  
  const handleToggle = () => {
    switchLanguage(currentLanguage === 'en' ? 'zh' : 'en');
  };
  
  return (
    <button onClick={handleToggle}>
      切换到 {currentLanguage === 'en' ? '中文' : 'English'}
    </button>
  );
}
```

## 响应式设计

```jsx live
function ResponsiveExample() {
  const [isMobile, setIsMobile] = React.useState(window.innerWidth < 768);
  
  React.useEffect(() => {
    const handleResize = () => {
      setIsMobile(window.innerWidth < 768);
    };
    
    window.addEventListener('resize', handleResize);
    return () => window.removeEventListener('resize', handleResize);
  }, []);
  
  return (
    <div style={{ 
      padding: '16px',
      border: '1px solid #e5e7eb',
      borderRadius: '8px'
    }}>
      <p style={{ marginBottom: '16px' }}>
        当前屏幕: <strong>{isMobile ? '移动端' : '桌面端'}</strong>
      </p>
      <LanguageSwitcher variant={isMobile ? 'dropdown' : 'buttons'} />
    </div>
  );
}
```

```jsx
function ResponsiveLanguageSwitcher() {
  const [isMobile, setIsMobile] = useState(false);
  
  useEffect(() => {
    const checkMobile = () => setIsMobile(window.innerWidth < 768);
    checkMobile();
    window.addEventListener('resize', checkMobile);
    return () => window.removeEventListener('resize', checkMobile);
  }, []);
  
  return (
    <LanguageSwitcher variant={isMobile ? 'dropdown' : 'buttons'} />
  );
}
```

## API

### Props

| 属性 | 类型 | 默认值 | 说明 |
| --- | --- | --- | --- |
| variant | `'dropdown' \| 'buttons'` | `'dropdown'` | 组件样式变体 |
| className | `string` | - | 自定义 CSS 类名 |

### 特性说明

- **自动同步**: 组件会自动同步当前语言状态
- **持久化**: 语言选择会自动保存到 localStorage
- **动画效果**: 按钮组模式包含滑动指示器动画
- **键盘支持**: 支持键盘导航和操作
- **无障碍**: 完整的 ARIA 支持

## 样式定制

### CSS 变量

```css
.language-switcher {
  /* 下拉选择器样式 */
  --dropdown-border-color: #d1d5db;
  --dropdown-border-radius: 6px;
  --dropdown-padding: 8px 12px;
  
  /* 按钮组样式 */
  --button-border-radius: 6px;
  --button-padding: 8px 16px;
  --button-active-color: #3b82f6;
  --button-hover-background: #f3f4f6;
  
  /* 指示器样式 */
  --indicator-background: #3b82f6;
  --indicator-transition: transform 0.2s ease;
}
```

### 自定义样式示例

```css
/* 自定义下拉选择器 */
.custom-dropdown .select {
  border: 2px solid #3b82f6;
  border-radius: 8px;
  font-weight: 500;
}

/* 自定义按钮组 */
.custom-buttons .languageButton {
  border-radius: 20px;
  font-weight: 600;
  text-transform: uppercase;
}

.custom-buttons .indicator {
  border-radius: 20px;
  background: linear-gradient(45deg, #3b82f6, #8b5cf6);
}
```

## 使用场景

### 1. 全局导航
在应用的顶部导航栏中放置语言切换器，方便用户随时切换语言。

### 2. 设置页面
在用户设置或偏好设置页面中提供语言选择选项。

### 3. 登录页面
在登录或注册页面提供语言切换，提升用户体验。

### 4. 移动端适配
根据屏幕尺寸自动选择合适的显示样式。

## 最佳实践

1. **位置选择**: 建议放在页面右上角或导航栏末端
2. **样式一致**: 确保与整体设计风格保持一致
3. **响应式**: 在移动端考虑使用下拉样式节省空间
4. **可访问性**: 确保键盘用户可以正常操作
5. **性能优化**: 语言切换后避免不必要的页面重新加载

## 相关组件

- [useTranslation Hook](/docs/hooks/useTranslation) - 获取翻译文本
- [useLanguageSwitch Hook](/docs/hooks/useLanguageSwitch) - 手动控制语言切换
- [国际化配置](/docs/i18n/configuration) - 配置支持的语言和翻译资源
